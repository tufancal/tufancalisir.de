---
import { useStoryblokApi } from "@storyblok/astro";
import { getStoryblokVersion } from "@/src/utils/env";

const storyblokApi = useStoryblokApi();

const { data: socialMediaData } = await storyblokApi.get(
  "cdn/stories/global/social-media",
  {
    version: getStoryblokVersion(),
  },
);

const socialMedia = socialMediaData.story.content;
const socialMediaLinks = socialMedia.body[0].links;
---

<section class="bg-base-100 py-8">
  <div class="container mx-auto max-w-5xl px-4">
    {
      socialMediaLinks.length > 0 && (
        <div class="flex flex-wrap justify-center gap-6">
          {socialMediaLinks.map((linkBlok: any) => (
            <a
              href={linkBlok.url.url}
              target={linkBlok.url.target}
              rel={
                linkBlok.url.target === "_blank"
                  ? "noopener noreferrer"
                  : undefined
              }
              class="link link-hover text-base-content/70 hover:text-primary transition-colors"
            >
              {linkBlok.text}
            </a>
          ))}
        </div>
      )
    }
  </div>
</section>
